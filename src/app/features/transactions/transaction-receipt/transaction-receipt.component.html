<header class="bread-crumb">
  <h2>
    {{ 'menu.transactions' | translate }} >
    {{ 'menu.transactionsReceipt' | translate }}
  </h2>
</header>
<div [@easeInAnimation] class="setup-main">
  <form
    class="transactions-receipt-form"
    [formGroup]="setupAddForm"
    (ngSubmit)="onSubmit()"
  >
    <mat-card class="transactions-receipt-card mat-elevation-z8">
      <mat-card-content>
        <div
          fxLayout="row"
          fxFlexFill
          fxLayout.lt-sm="column"
          fxLayoutGap="16px"
        >
          <mat-form-field fxFlex>
            <mat-label>{{
              'transactions.receipt.whLabel' | translate
            }}</mat-label>
            <input matInput required type="text" formControlName="wh" />
            <mat-error *ngIf="setupAddFormControl.wh.invalid">{{
              'transactions.receipt.whError' | translate
            }}</mat-error>
          </mat-form-field>

          <mat-form-field fxFlex>
            <mat-label>{{
              'transactions.receipt.ownerLabel' | translate
            }}</mat-label>
            <input
              matInput
              required
              type="text"
              formControlName="owner"
              [matAutocomplete]="auto"
            />
            <mat-autocomplete #auto="matAutocomplete">
              <mat-option *ngFor="let option of options" [value]="option">
                {{ option }}
              </mat-option>
            </mat-autocomplete>
            <mat-error *ngIf="setupAddFormControl.owner.invalid">{{
              'transactions.receipt.ownerError' | translate
            }}</mat-error>
          </mat-form-field>

          <mat-form-field fxFlex>
            <mat-label>{{
              'transactions.receipt.grnLabel' | translate
            }}</mat-label>
            <input
              matInput
              required
              type="text"
              class="scanned-input"
              formControlName="grn"
            />
            <mat-error *ngIf="setupAddFormControl.grn.invalid">{{
              'transactions.receipt.grnError' | translate
            }}</mat-error>
          </mat-form-field>
          <mat-form-field fxFlex>
            <mat-label>{{
              'transactions.receipt.addDateLabel' | translate
            }}</mat-label>
            <input matInput required type="date" formControlName="addDate" />
            <mat-error *ngIf="setupAddFormControl.addDate.invalid">{{
              'transactions.receipt.addDateError' | translate
            }}</mat-error>
          </mat-form-field>
        </div>

        <div
          fxLayout="row"
          fxFlexFill
          fxLayout.lt-sm="column"
          fxLayoutGap="16px"
        >
          <mat-form-field fxFlex.gt-sm="25%">
            <mat-label>{{
              'transactions.receipt.refNoLabel' | translate
            }}</mat-label>
            <input matInput required type="text" formControlName="refNo" />
            <mat-error *ngIf="setupAddFormControl.refNo.invalid">{{
              'transactions.receipt.refNoError' | translate
            }}</mat-error>
          </mat-form-field>

          <mat-form-field fxFlex>
            <mat-label>{{
              'transactions.receipt.remarksLabel' | translate
            }}</mat-label>
            <input matInput type="text" formControlName="remarks" />
          </mat-form-field>
        </div>
      </mat-card-content>
      <mat-card-actions class="card-actions">
        <button mat-raised-button color="primary" type="submit">
          {{ 'general.add' | translate }}
        </button>
        <button mat-raised-button type="button" disabled>
          {{ 'transactions.receipt.labelButtonLabel' | translate }}
        </button>
        <button mat-raised-button type="button" disabled>
          {{ 'transactions.receipt.grnrButtonLabel' | translate }}
        </button>
      </mat-card-actions>
    </mat-card>
  </form>
  <div>
    <mat-card class="transactions-receipt-details-card mat-elevation-z8">
      <div fxLayout="row" fxLayoutAlign="space-between center">
        <div>
          <button mat-icon-button color="primary" (click)="onAddItemRow()">
            <mat-icon>playlist_add</mat-icon>
          </button>
        </div>
        <div class="button-right-container">
          <button mat-icon-button color="primary">
            <mat-icon>file_download</mat-icon>
          </button>
          <button mat-icon-button color="primary">
            <mat-icon>picture_as_pdf</mat-icon>
          </button>
        </div>
      </div>
      <form [formGroup]="listItemsForm" autocomplete="off"></form>
      <table
        mat-table
        [dataSource]="dataSource"
        class="site-table mat-elevation-z8"
      >
        <ng-container matColumnDef="item">
          <th mat-header-cell *matHeaderCellDef>
            {{ 'transactions.receipt.tblHeaderItem' | translate }}
          </th>
          <td mat-cell *matCellDef="let element" [formGroup]="element">
            <div fxLayout="row" fxLayoutAlign="space-around ">
              <input matInput formControlName="itemId" />
              <button
                mat-icon-button
                color="primary"
                (click)="onSearchModalOpen(element)"
              >
                <mat-icon>search</mat-icon>
              </button>
            </div>
          </td>
          <td mat-footer-cell *matFooterCellDef></td>
        </ng-container>
        <ng-container matColumnDef="description">
          <th mat-header-cell *matHeaderCellDef>
            {{ 'general.description' | translate }}
          </th>
          <td mat-cell *matCellDef="let element" [formGroup]="element">
            <input matInput formControlName="description" />
          </td>
          <td mat-footer-cell *matFooterCellDef></td>
        </ng-container>
        <ng-container matColumnDef="sku">
          <th mat-header-cell *matHeaderCellDef>
            {{ 'transactions.receipt.tblHeaderSku' | translate }}
          </th>
          <td mat-cell *matCellDef="let element" [formGroup]="element">
            <input matInput formControlName="sku" />
          </td>
          <td mat-footer-cell *matFooterCellDef>Total</td>
          <td mat-footer-cell *matFooterCellDef></td>
        </ng-container>
        <ng-container matColumnDef="quantity">
          <th mat-header-cell *matHeaderCellDef>
            {{ 'transactions.receipt.tblHeaderQuantity' | translate }}
          </th>
          <td mat-cell *matCellDef="let element" [formGroup]="element">
            <input matInput formControlName="quantity" />
          </td>
          <td mat-footer-cell *matFooterCellDef>{{ getTotalQuantity() }}</td>
        </ng-container>
        <ng-container matColumnDef="weight">
          <th mat-header-cell *matHeaderCellDef>
            {{ 'transactions.receipt.tblHeaderWeight' | translate }}
          </th>
          <td mat-cell *matCellDef="let element" [formGroup]="element">
            <input matInput formControlName="weight" />
          </td>
          <td mat-footer-cell *matFooterCellDef>{{ getTotalWeight() }}</td>
        </ng-container>
        <ng-container matColumnDef="volume">
          <th mat-header-cell *matHeaderCellDef>
            {{ 'transactions.receipt.tblHeaderVolume' | translate }}
          </th>
          <td mat-cell *matCellDef="let element" [formGroup]="element">
            <input matInput formControlName="volume" />
          </td>
          <td mat-footer-cell *matFooterCellDef>{{ getTotalVolume() }}</td>
        </ng-container>
        <ng-container matColumnDef="manufactureDate">
          <th mat-header-cell *matHeaderCellDef>
            {{ 'transactions.receipt.tblHeaderManufactureDate' | translate }}
          </th>
          <td mat-cell *matCellDef="let element" [formGroup]="element">
            <input matInput formControlName="manufactureDate" />
          </td>
          <td mat-footer-cell *matFooterCellDef></td>
        </ng-container>
        <ng-container matColumnDef="expiry">
          <th mat-header-cell *matHeaderCellDef>
            {{ 'transactions.receipt.tblHeaderExpiry' | translate }}
          </th>
          <td mat-cell *matCellDef="let element" [formGroup]="element">
            <input matInput formControlName="expiry" />
          </td>
          <td mat-footer-cell *matFooterCellDef></td>
        </ng-container>
        <ng-container matColumnDef="batchNo">
          <th mat-header-cell *matHeaderCellDef>
            {{ 'transactions.receipt.tblHeaderBatchNo' | translate }}
          </th>
          <td mat-cell *matCellDef="let element" [formGroup]="element">
            <input matInput formControlName="batchNo" />
          </td>
          <td mat-footer-cell *matFooterCellDef></td>
        </ng-container>
        <ng-container matColumnDef="remarks">
          <th mat-header-cell *matHeaderCellDef>
            {{ 'transactions.receipt.tblHeaderRemarks' | translate }}
          </th>
          <td mat-cell *matCellDef="let element" [formGroup]="element">
            <input matInput formControlName="remarks" />
          </td>
          <td mat-footer-cell *matFooterCellDef></td>
        </ng-container>
        <ng-container matColumnDef="action">
          <th mat-header-cell *matHeaderCellDef></th>
          <td
            mat-cell
            *matCellDef="let element; let idx = index"
            [formGroup]="element"
          >
            <button
              mat-icon-button
              color="accent"
              (click)="onDeleteItemRow($event, element, idx)"
            >
              <mat-icon>delete</mat-icon>
            </button>
          </td>
          <td mat-footer-cell *matFooterCellDef></td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
        <tr mat-footer-row *matFooterRowDef="displayedColumns"></tr>
      </table>
      <div
        fxLayout="row"
        class="list-functions"
        fxLayoutAlign="space-between center"
      >
        <div class="button-left-container">
          <button mat-raised-button color="primary" disabled>
            {{ 'general.delete' | translate }}
          </button>
          <button mat-raised-button color="primary">
            {{ 'general.clear' | translate }}
          </button>
        </div>
        <div class="button-right-container">
          <button mat-raised-button color="primary">
            {{ 'general.save' | translate }}
          </button>
          <button mat-raised-button color="primary">
            {{ 'transactions.receipt.grnButtonLabel' | translate }}
          </button>
        </div>
      </div>
    </mat-card>
  </div>
</div>
